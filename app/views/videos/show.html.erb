<p id="notice"><%= notice %></p>

<p>
  <strong>Type:</strong>
  <%= @video.production_type %>
</p>

<p>
  <strong>Title:</strong>
  <%= @video.title %>
</p>

<p>
  <strong>Season:</strong>
  <%= @video.season %>
</p>

<p>
  <strong>Episode:</strong>
  <%= @video.episode %>
</p>

<p>
  <strong>Desc:</strong>
  <%= @video.desc %>
</p>

<p>
  <strong>Date:</strong>
  <%= @video.date %>
</p>

<p>
  <strong>Genres:</strong>
  <% @video.genres.each do |g| %>
    <%g.name%><br>
  <%end%>
</p>

<p>
  <strong>Series:</strong>
  <%= @video.series != nil ? @video.series.title : "no series"    %>
</p>

<p>
  <strong>User:</strong>
  <%= @video.user.email %>
</p>

<p>
  <strong>Time Left off:</strong>
  <%= @video.left_off %>
</p>

<p>
  <strong>Last Watched:</strong>
  <%= @video.last_watched %>
</p>

<%= link_to 'Edit', edit_video_path(@video) %> |
<%= link_to 'Back', videos_path %>


<div id="video_container">
   <video id="player" width="400" controls poster=<%=@video.poster%>>
     <source src=<%=@video.content.url%> type="video/mp4">
     <source src=<%=@video.content.url%> type="video/ogg">
     Your browser does not support HTML5 video.
   </video>
</div>

 <div>Current Video Time : <span  id="currentTime">0</span></div>
 <div>Total Video time : <span id="totalTime">0</span></div>



<script>
$(function(){
$('#currentTime').html($('#video_container').find('video').get(0).load());
$('#currentTime').html($('#video_container').find('video').get(0).play());
})
setInterval(function(){
$('#currentTime').html($('#video_container').find('video').get(0).currentTime);
$('#totalTime').html($('#video_container').find('video').get(0).duration);
},500)

document.getElementById('player').addEventListener('loadedmetadata', function() {
  this.currentTime = gon.start;
}, false);


setInterval(function()
{
    $.ajax({
      type:"post",
      url:"/set_time",
      datatype:"json",
      data: {total:$('#video_container').find('video').get(0).duration,time:$('#video_container').find('video').get(0).currentTime,video:gon.id},
      success:function(data)
      {
        console.log(data);
          //do something with response data
      }
    });
}, 30000);//time in milliseconds


</script>
